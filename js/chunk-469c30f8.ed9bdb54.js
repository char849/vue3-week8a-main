(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-469c30f8"],{"4de4":function(t,e,c){"use strict";var r=c("23e7"),n=c("b727").filter,l=c("1dde"),a=l("filter");r({target:"Array",proto:!0,forced:!a},{filter:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},"860c":function(t,e,c){"use strict";c.r(e);var r=c("7a23"),n={class:"container"},l={class:"table mt-6"},a=Object(r["h"])("thead",null,[Object(r["h"])("tr",null,[Object(r["h"])("th",null,"購買時間"),Object(r["h"])("th",null,"Email"),Object(r["h"])("th",null,"購買款項"),Object(r["h"])("th",null,"付款方式"),Object(r["h"])("th",null,"應付金額"),Object(r["h"])("th",null,"是否付款"),Object(r["h"])("th",null,"編輯")])],-1),o=["textContent"],d={class:"list-unstyled"},s=["textContent"],b={class:"text-right"},i={class:"form-check form-switch"},O=["id","onUpdate:modelValue"],u=["for"],h={key:0},j={key:1},p={class:"btn-group"},f=["onClick"],m=["onClick"];function g(t,e,c,g,y,v){var k=Object(r["L"])("CustomLoading"),w=Object(r["L"])("Pagination"),M=Object(r["L"])("OrderModal"),x=Object(r["L"])("DelOrderModal");return Object(r["B"])(),Object(r["g"])("div",n,[Object(r["k"])(k,{active:y.isLoading},null,8,["active"]),Object(r["h"])("table",l,[a,Object(r["h"])("tbody",null,[(Object(r["B"])(!0),Object(r["g"])(r["a"],null,Object(r["J"])(y.orders,(function(e,c){return Object(r["B"])(),Object(r["g"])(r["a"],{key:c},[y.orders.length?(Object(r["B"])(),Object(r["g"])("tr",{key:0,class:Object(r["s"])({"text-danger":!e.is_paid})},[Object(r["h"])("td",null,Object(r["O"])(t.$filters.date(e.create_at)),1),Object(r["h"])("td",null,[e.user?(Object(r["B"])(),Object(r["g"])("span",{key:0,textContent:Object(r["O"])(e.user.email)},null,8,o)):Object(r["f"])("",!0)]),Object(r["h"])("td",null,[Object(r["h"])("ul",d,[(Object(r["B"])(!0),Object(r["g"])(r["a"],null,Object(r["J"])(e.products,(function(t,e){return Object(r["B"])(),Object(r["g"])("li",{key:e},Object(r["O"])(t.product.title)+" 數量："+Object(r["O"])(t.qty)+" "+Object(r["O"])(t.product.unit),1)})),128))])]),Object(r["h"])("td",null,[e.user?(Object(r["B"])(),Object(r["g"])("span",{key:0,textContent:Object(r["O"])(e.user.payMethod)},null,8,s)):Object(r["f"])("",!0)]),Object(r["h"])("td",b,Object(r["O"])(t.$filters.currency(e.total)),1),Object(r["h"])("td",null,[Object(r["h"])("div",i,[Object(r["Z"])(Object(r["h"])("input",{class:"form-check-input",type:"checkbox",id:"".concat(e.id),"onUpdate:modelValue":function(t){return e.is_paid=t}},null,8,O),[[r["R"],e.is_paid]]),Object(r["h"])("label",{class:"form-check-label",for:"".concat(e.id)},[e.is_paid?(Object(r["B"])(),Object(r["g"])("span",h,"已付款")):(Object(r["B"])(),Object(r["g"])("span",j,"未付款"))],8,u)])]),Object(r["h"])("td",null,[Object(r["h"])("div",p,[Object(r["h"])("button",{class:"btn btn-outline-dark btn-sm",type:"button",onClick:function(t){return v.openOrdersModal(e)}}," 檢視 ",8,f),Object(r["h"])("button",{class:"btn btn-outline-secondary btn-sm",type:"button",onClick:function(t){return v.openDelOrderModal(e)}}," 刪除 ",8,m)])])],2)):Object(r["f"])("",!0)],64)})),128))])]),Object(r["k"])(w,{pages:y.pagination,onGetProduct:v.getOrders},null,8,["pages","onGetProduct"]),Object(r["k"])(M,{order:y.tempOrder,ref:"orderModal",onUpdatePaid:v.getOrders},null,8,["order","onUpdatePaid"]),Object(r["k"])(x,{item:y.tempOrder,ref:"delOrderModal",onDelOrderItem:v.delOrder},null,8,["item","onDelOrderItem"])])}c("b64b"),c("a4d3"),c("4de4"),c("d3b7"),c("e439"),c("159b"),c("dbb4");function y(t,e,c){return e in t?Object.defineProperty(t,e,{value:c,enumerable:!0,configurable:!0,writable:!0}):t[e]=c,t}function v(t,e){var c=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),c.push.apply(c,r)}return c}function k(t){for(var e=1;e<arguments.length;e++){var c=null!=arguments[e]?arguments[e]:{};e%2?v(Object(c),!0).forEach((function(e){y(t,e,c[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(c)):v(Object(c)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(c,e))}))}return t}c("99af");var w=c("29e4"),M=(c("b0c0"),{class:"modal fade",id:"OrderModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"}),x={class:"modal-dialog modal-xl",role:"document"},$={class:"modal-content border-0"},B=Object(r["h"])("div",{class:"modal-header bg-dark text-white"},[Object(r["h"])("h5",{class:"modal-title",id:"exampleModalLabel"},[Object(r["h"])("span",null,"訂單細節")]),Object(r["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),P={class:"modal-body"},C={class:"row"},L={class:"col-md-4"},_=Object(r["h"])("h3",null,"用戶資料",-1),D={class:"table"},S={key:0},E=Object(r["h"])("th",{style:{width:"100px"}},"姓名",-1),J=Object(r["h"])("th",null,"Email",-1),U=Object(r["h"])("th",null,"電話",-1),I=Object(r["h"])("th",null,"地址",-1),V={class:"col-md-8"},q=Object(r["h"])("h3",null,"訂單細節",-1),G={class:"table"},N=Object(r["h"])("th",{style:{width:"100px"}},"訂單編號",-1),R=Object(r["h"])("th",null,"下單時間",-1),Z=Object(r["h"])("th",null,"付款時間",-1),A={key:0},F={key:1},T=Object(r["h"])("th",null,"付款狀態",-1),X={key:0,class:"text-success"},z={key:1,class:"text-muted"},H=Object(r["h"])("th",null,"總金額",-1),K=Object(r["h"])("h3",null,"選購商品",-1),Q={class:"table"},W=Object(r["h"])("thead",null,[Object(r["h"])("tr")],-1),Y={class:"text-end"},tt={class:"d-flex justify-content-end"},et={class:"form-check"},ct={class:"form-check-label",for:"flexCheckDefault"},rt={key:0},nt={key:1},lt={class:"modal-footer"},at=Object(r["h"])("button",{type:"button",class:"btn btn-outline-dark","data-bs-dismiss":"modal"}," 取消 ",-1);function ot(t,e,c,n,l,a){return Object(r["B"])(),Object(r["g"])("div",M,[Object(r["h"])("div",x,[Object(r["h"])("div",$,[B,Object(r["h"])("div",P,[Object(r["h"])("div",C,[Object(r["h"])("div",L,[_,Object(r["h"])("table",D,[l.tempOrder.user?(Object(r["B"])(),Object(r["g"])("tbody",S,[Object(r["h"])("tr",null,[E,Object(r["h"])("td",null,Object(r["O"])(l.tempOrder.user.name),1)]),Object(r["h"])("tr",null,[J,Object(r["h"])("td",null,Object(r["O"])(l.tempOrder.user.email),1)]),Object(r["h"])("tr",null,[U,Object(r["h"])("td",null,Object(r["O"])(l.tempOrder.user.tel),1)]),Object(r["h"])("tr",null,[I,Object(r["h"])("td",null,Object(r["O"])(l.tempOrder.user.address),1)])])):Object(r["f"])("",!0)])]),Object(r["h"])("div",V,[q,Object(r["h"])("table",G,[Object(r["h"])("tbody",null,[Object(r["h"])("tr",null,[N,Object(r["h"])("td",null,Object(r["O"])(l.tempOrder.id),1)]),Object(r["h"])("tr",null,[R,Object(r["h"])("td",null,Object(r["O"])(t.$filters.date(l.tempOrder.create_at)),1)]),Object(r["h"])("tr",null,[Z,Object(r["h"])("td",null,[l.tempOrder.paid_date?(Object(r["B"])(),Object(r["g"])("span",A,Object(r["O"])(t.$filters.date(l.tempOrder.paid_date)),1)):(Object(r["B"])(),Object(r["g"])("span",F,"時間不正確"))])]),Object(r["h"])("tr",null,[T,Object(r["h"])("td",null,[l.tempOrder.is_paid?(Object(r["B"])(),Object(r["g"])("strong",X,"已付款")):(Object(r["B"])(),Object(r["g"])("span",z,"尚未付款"))])]),Object(r["h"])("tr",null,[H,Object(r["h"])("td",null,Object(r["O"])(t.$filters.currency(l.tempOrder.total)),1)])])]),K,Object(r["h"])("table",Q,[W,Object(r["h"])("tbody",null,[(Object(r["B"])(!0),Object(r["g"])(r["a"],null,Object(r["J"])(l.tempOrder.products,(function(e){return Object(r["B"])(),Object(r["g"])("tr",{key:e.id},[Object(r["h"])("th",null,Object(r["O"])(e.product.title),1),Object(r["h"])("td",null,Object(r["O"])(e.qty)+" / "+Object(r["O"])(e.product.unit),1),Object(r["h"])("td",Y,Object(r["O"])(t.$filters.currency(e.final_total)),1)])})),128))])]),Object(r["h"])("div",tt,[Object(r["h"])("div",et,[Object(r["Z"])(Object(r["h"])("input",{class:"form-check-input",type:"checkbox",value:"",id:"flexCheckDefault","onUpdate:modelValue":e[0]||(e[0]=function(t){return l.tempOrder.is_paid=t})},null,512),[[r["R"],l.tempOrder.is_paid]]),Object(r["h"])("label",ct,[l.tempOrder.is_paid?(Object(r["B"])(),Object(r["g"])("span",rt,"已付款")):(Object(r["B"])(),Object(r["g"])("span",nt,"未付款"))])])])])])]),Object(r["h"])("div",lt,[at,Object(r["h"])("button",{type:"button",class:"btn btn-secondary",onClick:e[1]||(e[1]=function(t){return a.updatePaid(l.tempOrder)})}," 修改付款狀態 ")])])])],512)}var dt=c("7c2b"),st=c.n(dt),bt={props:{order:{type:Object,default:function(){return{}}}},data:function(){return{status:{},modal:{},tempOrder:{},isPaid:!1}},watch:{order:function(){this.tempOrder=this.order}},methods:{updatePaid:function(t){var e=this,c="".concat("https://vue3-course-api.hexschool.io/v2/","api/").concat("charlotte-hexschool","/admin/order/").concat(t.id),r={is_paid:t.is_paid};this.$http.put(c,{data:r}).then((function(t){e.$swal(t.data.message,"","success"),e.orderModal.hide(),e.$emit("update-paid")})).catch((function(t){e.$swal(t.response,"","error")}))},openModal:function(){this.orderModal.show()},closeModal:function(){this.orderModal.hide()}},mounted:function(){this.orderModal=new st.a(this.$refs.modal,{keyboard:!1,backdrop:"static"})}},it=c("6b0d"),Ot=c.n(it);const ut=Ot()(bt,[["render",ot]]);var ht=ut,jt={class:"modal fade",id:"delOrderModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},pt={class:"modal-dialog",role:"document"},ft={class:"modal-content border-0"},mt={class:"modal-header bg-success text-white"},gt={class:"modal-title"},yt=Object(r["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),vt={class:"modal-body"},kt=Object(r["j"])(" 是否刪除 "),wt={class:"text-danger"},Mt=Object(r["j"])(" (刪除後將無法恢復)。 "),xt={class:"modal-footer"},$t=Object(r["h"])("button",{type:"button",class:"btn btn-outline-dark","data-bs-dismiss":"modal"}," 取消 ",-1);function Bt(t,e,c,n,l,a){var o=Object(r["L"])("CustomLoading");return Object(r["B"])(),Object(r["g"])(r["a"],null,[Object(r["h"])("div",jt,[Object(r["h"])("div",pt,[Object(r["h"])("div",ft,[Object(r["h"])("div",mt,[Object(r["h"])("h5",gt,[Object(r["h"])("span",null,"刪除 "+Object(r["O"])(c.item.title),1)]),yt]),Object(r["h"])("div",vt,[kt,Object(r["h"])("strong",wt,Object(r["O"])(c.item.title),1),Mt]),Object(r["h"])("div",xt,[$t,Object(r["h"])("button",{type:"button",class:"btn btn-secondary",onClick:e[0]||(e[0]=function(e){return t.$emit("del-order-item")})}," 確認刪除 ")])])])],512),Object(r["k"])(o,{active:l.isLoading},null,8,["active"])],64)}var Pt={props:["item"],data:function(){return{modal:{},isLoading:!1}},methods:{openModal:function(){this.delOrderModal.show()},hideModal:function(){this.delOrderModal.hide()}},emits:["del-order-item"],mounted:function(){this.delOrderModal=new st.a(this.$refs.modal,{keyboard:!1,backdrop:"static"})}};const Ct=Ot()(Pt,[["render",Bt]]);var Lt=Ct,_t={data:function(){return{orders:[],isNew:!1,pagination:{},tempOrder:{},isLoading:!1}},components:{Pagination:w["a"],OrderModal:ht,DelOrderModal:Lt},inject:["emitter"],methods:{getOrders:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,c="".concat("https://vue3-course-api.hexschool.io/v2/","api/").concat("charlotte-hexschool","/admin/orders?page=").concat(e);this.isLoading=!0,this.$http.get(c).then((function(e){t.orders=e.data.orders,t.isLoading=!1,t.pagination=e.data.pagination})).catch((function(e){t.$swal(e.response,"","error")}))},delOrder:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/v2/","api/").concat("charlotte-hexschool","/admin/order/").concat(this.tempOrder.id);this.$http.delete(e).then((function(e){t.$emit("get-orders"),t.$swal(e.data.message,"","success"),t.$refs.delOrderModal.hideModal(),t.getOrders()})).catch((function(e){t.$swal(e.response,"","error")}))},openOrdersModal:function(t){this.tempOrder=k({},t),this.isNew=!1,this.$refs.orderModal.openModal()},openDelOrderModal:function(t){this.tempOrder=k({},t),this.$refs.delOrderModal.openModal()}},mounted:function(){this.getOrders()}};const Dt=Ot()(_t,[["render",g]]);e["default"]=Dt},b0c0:function(t,e,c){var r=c("83ab"),n=c("5e77").EXISTS,l=c("e330"),a=c("9bf2").f,o=Function.prototype,d=l(o.toString),s=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,b=l(s.exec),i="name";r&&!n&&a(o,i,{configurable:!0,get:function(){try{return b(s,d(this))[1]}catch(t){return""}}})},dbb4:function(t,e,c){var r=c("23e7"),n=c("83ab"),l=c("56ef"),a=c("fc6a"),o=c("06cf"),d=c("8418");r({target:"Object",stat:!0,sham:!n},{getOwnPropertyDescriptors:function(t){var e,c,r=a(t),n=o.f,s=l(r),b={},i=0;while(s.length>i)c=n(r,e=s[i++]),void 0!==c&&d(b,e,c);return b}})},e439:function(t,e,c){var r=c("23e7"),n=c("d039"),l=c("fc6a"),a=c("06cf").f,o=c("83ab"),d=n((function(){a(1)})),s=!o||d;r({target:"Object",stat:!0,forced:s,sham:!o},{getOwnPropertyDescriptor:function(t,e){return a(l(t),e)}})}}]);
//# sourceMappingURL=chunk-469c30f8.ed9bdb54.js.map