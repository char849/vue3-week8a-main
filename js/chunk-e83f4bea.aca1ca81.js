(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e83f4bea"],{"724a":function(t,e,c){"use strict";c.r(e);var o=c("7a23"),a={class:"container"},l=Object(o["h"])("h2",null,"後台產品管理列表",-1),n={class:"text-end mt-5"},r={class:"table mt-4"},i=Object(o["h"])("thead",null,[Object(o["h"])("tr",null,[Object(o["h"])("th",{width:"120"},"圖片"),Object(o["h"])("th",{width:"120"},"分類"),Object(o["h"])("th",null,"產品名稱"),Object(o["h"])("th",{width:"120"},"原價"),Object(o["h"])("th",{width:"120"},"售價"),Object(o["h"])("th",{width:"100"},"是否啟用"),Object(o["h"])("th",{width:"120"},"編輯")])],-1),d={style:{width:"200px"}},s={class:"text-end"},u={class:"text-end"},b={class:"btn-group"},h=["onClick"],p=["onClick"];function m(t,e,c,m,O,f){var j=Object(o["L"])("CustomLoading"),g=Object(o["L"])("Pagination"),v=Object(o["L"])("AdminProductModal"),P=Object(o["L"])("DelProductModal");return Object(o["B"])(),Object(o["g"])("div",a,[Object(o["k"])(j,{active:O.isLoading},null,8,["active"]),l,Object(o["h"])("div",n,[Object(o["h"])("button",{class:"btn btn-secondary fw-bold",type:"button",onClick:e[0]||(e[0]=function(t){return f.openModal("isNew","item")})}," 建立新的產品 ")]),Object(o["h"])("table",r,[i,Object(o["h"])("tbody",null,[(Object(o["B"])(!0),Object(o["g"])(o["a"],null,Object(o["J"])(O.products,(function(e){return Object(o["B"])(),Object(o["g"])("tr",{key:e.id},[Object(o["h"])("td",d,[Object(o["h"])("div",{style:Object(o["t"])([{height:"100px","background-size":"cover","background-position":"center"},{backgroundImage:"url(".concat(e.imageUrl,")")}])},null,4)]),Object(o["h"])("td",null,Object(o["O"])(e.category),1),Object(o["h"])("td",null,Object(o["O"])(e.title),1),Object(o["h"])("td",s,Object(o["O"])(t.$filters.currency(e.origin_price)),1),Object(o["h"])("td",u,Object(o["O"])(t.$filters.currency(e.price)),1),Object(o["h"])("td",null,[Object(o["h"])("span",{class:Object(o["s"])([1===e.is_enabled?"text-secondary":"text-danger"])},Object(o["O"])(1===e.is_enabled?"啟用":"未啟用"),3)]),Object(o["h"])("td",null,[Object(o["h"])("div",b,[Object(o["h"])("button",{type:"button",class:"btn btn-outline-success btn-sm",onClick:function(t){return f.openModal("edit",e)}}," 編輯 ",8,h),Object(o["h"])("button",{type:"button",class:"btn btn-outline-secondary btn-sm",onClick:function(t){return f.openModal("delete",e)}}," 刪除 ",8,p)])])])})),128))])]),Object(o["k"])(g,{pages:O.pagination,onGetProduct:f.getProducts},null,8,["pages","onGetProduct"]),Object(o["k"])(v,{product:O.tempProduct,"is-new":O.isNew,ref:"adminProductModal",onGetProducts:f.getProducts},null,8,["product","is-new","onGetProducts"]),Object(o["k"])(P,{"temp-product":O.tempProduct,ref:"delProductModal",onGetProducts:f.getProducts},null,8,["temp-product","onGetProducts"])])}c("99af"),c("e9c4");var O=c("29e4"),f=(c("a434"),c("a4d3"),c("e01a"),{id:"AdminProductModal",ref:"modal",class:"modal fade",tabindex:"-1","aria-labelledby":"productModalLabel","aria-hidden":"true"}),j={class:"modal-dialog modal-xl"},g={class:"modal-content border-0"},v={class:"modal-header bg-dark text-white"},P={id:"productModalLabel",class:"modal-title"},y=Object(o["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),w={class:"modal-body"},k={class:"row"},U={class:"col-sm-4"},M={class:"mb-3"},x=Object(o["h"])("label",{for:"imageUrl",class:"form-label"},"主要圖片",-1),$={class:"mb-3"},L={for:"customFile",class:"form-label"},C=Object(o["j"])("或 上傳圖片 "),N={key:0,class:"fas fa-spinner fa-spin"},S=["src"],F=Object(o["h"])("h3",{class:"mb-3"},"多圖新增",-1),B={key:0},J={class:"mb-1"},D={class:"mb-3"},T=Object(o["h"])("label",{for:"imageUrl",class:"form-label"},"圖片網址",-1),V=["onUpdate:modelValue"],_=["src"],A=["onClick"],Z={class:"col-sm-8"},G={class:"mb-3"},I=Object(o["h"])("label",{for:"title",class:"form-label"},"標題",-1),z={class:"row"},E={class:"mb-3 col-md-6"},R=Object(o["h"])("label",{for:"category",class:"form-label"},"分類",-1),q={class:"mb-3 col-md-6"},H=Object(o["h"])("label",{for:"price",class:"form-label"},"單位",-1),K={class:"row"},Q={class:"mb-3 col-md-6"},W=Object(o["h"])("label",{for:"origin_price",class:"form-label"},"原價",-1),X={class:"mb-3 col-md-6"},Y=Object(o["h"])("label",{for:"price",class:"form-label"},"售價",-1),tt=Object(o["h"])("hr",null,null,-1),et={class:"mb-3"},ct=Object(o["h"])("label",{for:"description",class:"form-label"},"產品描述",-1),ot={class:"mb-3"},at=Object(o["h"])("label",{for:"content",class:"form-label"},"說明內容",-1),lt={class:"mb-3"},nt={class:"form-check"},rt=Object(o["h"])("label",{class:"form-check-label",for:"is_enabled"},"是否啟用",-1),it={class:"modal-footer"},dt=Object(o["h"])("button",{type:"button",class:"btn btn-outline-dark","data-bs-dismiss":"modal"}," 取消 ",-1);function st(t,e,c,a,l,n){var r=Object(o["L"])("CustomLoading");return Object(o["B"])(),Object(o["g"])(o["a"],null,[Object(o["h"])("div",f,[Object(o["h"])("div",j,[Object(o["h"])("div",g,[Object(o["h"])("div",v,[Object(o["h"])("h5",P,[Object(o["h"])("span",null,Object(o["O"])(c.isNew?"新增":"修改")+"產品",1)]),y]),Object(o["h"])("div",w,[Object(o["h"])("div",k,[Object(o["h"])("div",U,[Object(o["h"])("div",M,[x,Object(o["Z"])(Object(o["h"])("input",{id:"imageUrl","onUpdate:modelValue":e[0]||(e[0]=function(t){return l.tempProduct.imageUrl=t}),type:"text",class:"form-control mb-2",placeholder:"請輸入圖片連結"},null,512),[[o["T"],l.tempProduct.imageUrl]]),Object(o["h"])("div",$,[Object(o["h"])("label",L,[C,l.status.fileUploading?(Object(o["B"])(),Object(o["g"])("i",N)):Object(o["f"])("",!0)]),Object(o["h"])("input",{type:"file",id:"customFile",class:"form-control",ref:"fileInput",onChange:e[1]||(e[1]=function(){return n.uploadFile&&n.uploadFile.apply(n,arguments)})},null,544)]),Object(o["h"])("img",{class:"img-fluid",src:l.tempProduct.imageUrl},null,8,S)]),F,Array.isArray(l.tempProduct.imagesUrl)?(Object(o["B"])(),Object(o["g"])("div",B,[(Object(o["B"])(!0),Object(o["g"])(o["a"],null,Object(o["J"])(l.tempProduct.imagesUrl,(function(t,e){return Object(o["B"])(),Object(o["g"])(o["a"],{key:e+"123"},[Object(o["h"])("div",J,[Object(o["h"])("div",D,[T,Object(o["Z"])(Object(o["h"])("input",{"onUpdate:modelValue":function(t){return l.tempProduct.imagesUrl[e]=t},type:"text",class:"form-control",placeholder:"請輸入圖片連結"},null,8,V),[[o["T"],l.tempProduct.imagesUrl[e]]])]),Object(o["h"])("img",{class:"img-fluid",src:l.tempProduct.imagesUrl[e],alt:"次產品圖"},null,8,_)]),Object(o["h"])("button",{type:"button",class:"btn btn-outline-secondary btn fw-bold d-block w-100",onClick:function(t){return l.tempProduct.imagesUrl.splice(e,1)}}," 刪除 ",8,A)],64)})),128)),!l.tempProduct.imagesUrl.length||l.tempProduct.imagesUrl[l.tempProduct.imagesUrl.length-1]?(Object(o["B"])(),Object(o["g"])("button",{key:0,type:"button",class:"btn btn-outline-success btn-sm d-block w-100",onClick:e[2]||(e[2]=function(t){return l.tempProduct.imagesUrl.push("")})}," 新增一張圖片 ")):Object(o["f"])("",!0)])):Object(o["f"])("",!0)]),Object(o["h"])("div",Z,[Object(o["h"])("div",G,[I,Object(o["Z"])(Object(o["h"])("input",{id:"title","onUpdate:modelValue":e[3]||(e[3]=function(t){return l.tempProduct.title=t}),type:"text",class:"form-control",placeholder:"請輸入標題"},null,512),[[o["T"],l.tempProduct.title]])]),Object(o["h"])("div",z,[Object(o["h"])("div",E,[R,Object(o["Z"])(Object(o["h"])("input",{id:"category","onUpdate:modelValue":e[4]||(e[4]=function(t){return l.tempProduct.category=t}),type:"text",class:"form-control",placeholder:"請輸入分類"},null,512),[[o["T"],l.tempProduct.category]])]),Object(o["h"])("div",q,[H,Object(o["Z"])(Object(o["h"])("input",{id:"unit","onUpdate:modelValue":e[5]||(e[5]=function(t){return l.tempProduct.unit=t}),type:"text",class:"form-control",placeholder:"請輸入單位"},null,512),[[o["T"],l.tempProduct.unit]])])]),Object(o["h"])("div",K,[Object(o["h"])("div",Q,[W,Object(o["Z"])(Object(o["h"])("input",{id:"origin_price","onUpdate:modelValue":e[6]||(e[6]=function(t){return l.tempProduct.origin_price=t}),type:"number",min:"0",class:"form-control",placeholder:"請輸入原價"},null,512),[[o["T"],l.tempProduct.origin_price,void 0,{number:!0}]])]),Object(o["h"])("div",X,[Y,Object(o["Z"])(Object(o["h"])("input",{id:"price","onUpdate:modelValue":e[7]||(e[7]=function(t){return l.tempProduct.price=t}),type:"number",min:"0",class:"form-control",placeholder:"請輸入售價"},null,512),[[o["T"],l.tempProduct.price,void 0,{number:!0}]])])]),tt,Object(o["h"])("div",et,[ct,Object(o["Z"])(Object(o["h"])("textarea",{id:"description","onUpdate:modelValue":e[8]||(e[8]=function(t){return l.tempProduct.description=t}),type:"text",class:"form-control",placeholder:"請輸入產品描述"},"\n                ",512),[[o["T"],l.tempProduct.description]])]),Object(o["h"])("div",ot,[at,Object(o["Z"])(Object(o["h"])("textarea",{id:"description","onUpdate:modelValue":e[9]||(e[9]=function(t){return l.tempProduct.content=t}),type:"text",class:"form-control",placeholder:"請輸入說明內容"},"\n                ",512),[[o["T"],l.tempProduct.content]])]),Object(o["h"])("div",lt,[Object(o["h"])("div",nt,[Object(o["Z"])(Object(o["h"])("input",{id:"is_enabled","onUpdate:modelValue":e[10]||(e[10]=function(t){return l.tempProduct.is_enabled=t}),class:"form-check-input",type:"checkbox","true-value":1,"false-value":0},null,512),[[o["R"],l.tempProduct.is_enabled]]),rt])])])])]),Object(o["h"])("div",it,[dt,Object(o["h"])("button",{type:"button",class:"btn btn-secondary",onClick:e[11]||(e[11]=function(t){return n.updateProduct()})}," 確認 ")])])])],512),Object(o["k"])(r,{active:l.isLoading},null,8,["active"])],64)}var ut=c("7c2b"),bt=c.n(ut),ht={props:{product:{type:Object,default:function(){return{}}},isNew:{type:Boolean,default:!1}},data:function(){return{modal:{},id:"",isLoading:!1,tempProduct:{imagesUrl:[]},status:{}}},inject:["emitter"],methods:{uploadFile:function(){var t=this,e=this.$refs.fileInput.files[0],c=new FormData;c.append("file-to-upload",e);var o="".concat("https://vue3-course-api.hexschool.io/v2/","/api/").concat("charlotte-hexschool","/admin/upload");this.status.fileUploading=!0,this.$http.post(o,c,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){t.status.fileUploading=!1,e.data.success?(t.tempProduct.imageUrl=e.data.imageUrl,t.$refs.fileInput.value="",t.$swal(e.data.message,"","success")):(t.$refs.fileInput.value="",t.$swal(e.data.message,"","error"))})).catch((function(e){t.status.fileUploading=!1,t.$swal(e.response,"","error")}))},updateProduct:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/v2/","api/").concat("charlotte-hexschool","/admin/product"),c="post",o="新增產品";this.isNew||(e="".concat("https://vue3-course-api.hexschool.io/v2/","api/").concat("charlotte-hexschool","/admin/product/").concat(this.tempProduct.id),c="put",o="更新產品"),this.$http[c](e,{data:this.tempProduct}).then((function(e){t.adminProductModal.hide(),t.$swal(e.data.message,o,"","success"),t.$emit("get-products")})).catch((function(e){t.$swal(e.response,o,"","error")}))},openModal:function(){this.adminProductModal.show()},closeModal:function(){this.adminProductModal.hide()}},watch:{product:function(){this.tempProduct=JSON.parse(JSON.stringify(this.product))}},mounted:function(){this.adminProductModal=new bt.a(this.$refs.modal,{keyboard:!1,backdrop:"static"})}},pt=c("6b0d"),mt=c.n(pt);const Ot=mt()(ht,[["render",st]]);var ft=Ot,jt={id:"DelProductModal",ref:"modal",class:"modal fade",tabindex:"-1","aria-labelledby":"delProductModalLabel","aria-hidden":"true"},gt={class:"modal-dialog"},vt={class:"modal-content border-0"},Pt=Object(o["h"])("div",{class:"modal-header bg-success text-white"},[Object(o["h"])("h5",{id:"delProductModalLabel",class:"modal-title"},[Object(o["h"])("span",null,"刪除產品")]),Object(o["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),yt={class:"modal-body"},wt=Object(o["j"])(" 是否刪除 "),kt={class:"text-danger"},Ut=Object(o["j"])(" 商品(刪除後將無法恢復)。 "),Mt={class:"modal-footer"},xt=Object(o["h"])("button",{type:"button",class:"btn btn-outline-dark","data-bs-dismiss":"modal"}," 取消 ",-1);function $t(t,e,c,a,l,n){var r=Object(o["L"])("CustomLoading");return Object(o["B"])(),Object(o["g"])(o["a"],null,[Object(o["h"])("div",jt,[Object(o["h"])("div",gt,[Object(o["h"])("div",vt,[Pt,Object(o["h"])("div",yt,[wt,Object(o["h"])("strong",kt,Object(o["O"])(c.tempProduct.title),1),Ut]),Object(o["h"])("div",Mt,[xt,Object(o["h"])("button",{type:"button",class:"btn btn-secondary",onClick:e[0]||(e[0]=function(){return n.delProduct&&n.delProduct.apply(n,arguments)})}," 確認刪除 ")])])])],512),Object(o["k"])(r,{active:l.isLoading},null,8,["active"])],64)}var Lt={props:["tempProduct"],data:function(){return{isLoading:!1}},methods:{delProduct:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/v2/","api/").concat("charlotte-hexschool","/admin/product/").concat(this.tempProduct.id);this.$http.delete(e).then((function(e){t.$emit("get-products"),t.delProductModal.hide(),t.$swal(e.data.message,"","success")})).catch((function(e){t.$swal(e.response,"","error")}))},openModal:function(){this.delProductModal.show()},closeModal:function(){this.delProductModal.hide()}},mounted:function(){this.delProductModal=new bt.a(this.$refs.modal,{keyboard:!1,backdrop:"static"})}};const Ct=mt()(Lt,[["render",$t]]);var Nt=Ct,St={data:function(){return{products:[],isLoadingItem:"",isLoading:!1,isNew:!1,tempProduct:{imagesUrl:[]},status:{fileUploading:!1},modal:{AdminProductModal:"",DelProductModal:""},pagination:{}}},components:{Pagination:O["a"],AdminProductModal:ft,DelProductModal:Nt},methods:{getProducts:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io/v2/","api/").concat("charlotte-hexschool","/admin/products?page=").concat(e);this.$http.get(c).then((function(e){t.products=e.data.products,t.isLoading=!1,t.pagination=e.data.pagination})).catch((function(e){t.$swal(e.response,"","error")}))},openModal:function(t,e){"isNew"===t?(this.tempProduct={imagesUrl:[]},this.isNew=!0,this.$refs.adminProductModal.openModal()):"edit"===t?(this.tempProduct=JSON.parse(JSON.stringify(e)),this.isNew=!1,this.$refs.adminProductModal.openModal(),this.tempProduct.imagesUrl||(this.tempProduct.imagesUrl=[])):"delete"===t&&(this.tempProduct=JSON.parse(JSON.stringify(e)),this.$refs.delProductModal.openModal())}},mounted:function(){this.getProducts()}};const Ft=mt()(St,[["render",m]]);e["default"]=Ft},a434:function(t,e,c){"use strict";var o=c("23e7"),a=c("da84"),l=c("23cb"),n=c("5926"),r=c("07fa"),i=c("7b0b"),d=c("65f0"),s=c("8418"),u=c("1dde"),b=u("splice"),h=a.TypeError,p=Math.max,m=Math.min,O=9007199254740991,f="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!b},{splice:function(t,e){var c,o,a,u,b,j,g=i(this),v=r(g),P=l(t,v),y=arguments.length;if(0===y?c=o=0:1===y?(c=0,o=v-P):(c=y-2,o=m(p(n(e),0),v-P)),v+c-o>O)throw h(f);for(a=d(g,o),u=0;u<o;u++)b=P+u,b in g&&s(a,u,g[b]);if(a.length=o,c<o){for(u=P;u<v-o;u++)b=u+o,j=u+c,b in g?g[j]=g[b]:delete g[j];for(u=v;u>v-o+c;u--)delete g[u-1]}else if(c>o)for(u=v-o;u>P;u--)b=u+o-1,j=u+c-1,b in g?g[j]=g[b]:delete g[j];for(u=0;u<c;u++)g[u+P]=arguments[u+2];return g.length=v-o+c,a}})},e01a:function(t,e,c){"use strict";var o=c("23e7"),a=c("83ab"),l=c("da84"),n=c("e330"),r=c("1a2d"),i=c("1626"),d=c("3a9b"),s=c("577e"),u=c("9bf2").f,b=c("e893"),h=l.Symbol,p=h&&h.prototype;if(a&&i(h)&&(!("description"in p)||void 0!==h().description)){var m={},O=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:s(arguments[0]),e=d(p,this)?new h(t):void 0===t?h():h(t);return""===t&&(m[e]=!0),e};b(O,h),O.prototype=p,p.constructor=O;var f="Symbol(test)"==String(h("test")),j=n(p.toString),g=n(p.valueOf),v=/^Symbol\((.*)\)[^)]+$/,P=n("".replace),y=n("".slice);u(p,"description",{configurable:!0,get:function(){var t=g(this),e=j(t);if(r(m,t))return"";var c=f?y(e,7,-1):P(e,v,"$1");return""===c?void 0:c}}),o({global:!0,forced:!0},{Symbol:O})}},e9c4:function(t,e,c){var o=c("23e7"),a=c("da84"),l=c("d066"),n=c("2ba4"),r=c("e330"),i=c("d039"),d=a.Array,s=l("JSON","stringify"),u=r(/./.exec),b=r("".charAt),h=r("".charCodeAt),p=r("".replace),m=r(1..toString),O=/[\uD800-\uDFFF]/g,f=/^[\uD800-\uDBFF]$/,j=/^[\uDC00-\uDFFF]$/,g=function(t,e,c){var o=b(c,e-1),a=b(c,e+1);return u(f,t)&&!u(j,a)||u(j,t)&&!u(f,o)?"\\u"+m(h(t,0),16):t},v=i((function(){return'"\\udf06\\ud834"'!==s("\udf06\ud834")||'"\\udead"'!==s("\udead")}));s&&o({target:"JSON",stat:!0,forced:v},{stringify:function(t,e,c){for(var o=0,a=arguments.length,l=d(a);o<a;o++)l[o]=arguments[o];var r=n(s,null,l);return"string"==typeof r?p(r,O,g):r}})}}]);
//# sourceMappingURL=chunk-e83f4bea.aca1ca81.js.map